extends ../../layouts/default.pug
include ../../mixins/box-head.pug


block main 

    .section-products-featured.my-5 
        .container 
            .row 
                .col-12 
                    +box-head("Thanh toán")
            
            .row    
                .col-12 
                    table(class="table table-bordered")
                        thead 
                            tr 
                                th STT 
                                th Ảnh 
                                th Tên 
                                th Giá
                                th Số lượng
                                th Tổng tiền 
                        tbody 
                            if(cartDetail.products.length > 0)
                                each item, index in cartDetail.products
                                    tr 
                                        td #{index +1}
                                        td
                                            img(src=item.productInfo.thumbnail alt=item.productInfo.title width="80px")
                                        td 
                                            a(href=`/products/detail/${item.product_id}`) #{item.title}
                                        td #{item.productInfo.priceNew}
                                        td #{item.quantity}
                                        td #{item.productInfo.priceNew * item.quantity}

                    h3(class="text-right") Tổng đơn hàng: #{cartDetail.totalPrice}$

                   
            if(cartDetail.products.length > 0)
                .row 
                    .col-12 
                        .card.p-4.my-4 
                            form(
                                action="/checkout/order"
                                method="POST"
                            )
                                div(class="form-group")
                                    label(for="fullname") Họ tên 
                                    input(
                                        type="text"
                                        class="form-control"
                                        id="fullname"
                                        name="fullname"
                                        require
                                    )
                                div(class="form-group")
                                    label(for="phone") Số điện thoại 
                                    input(
                                        type="text"
                                        class="form-control"
                                        id="phone"
                                        name="phone"
                                        require
                                    )
                                div(class="form-group")
                                    label(for="address") Địa chỉ 
                                    input(
                                        type="text"
                                        class="form-control"
                                        id="address"
                                        name="address"
                                        require
                                    )
                                div(class="form-group")
                                    button(
                                        type="submit"
                                        class="btn btn-success btn-block"
                                    ) Đặt hàng




                    script(src="/cart.js")
                                    
